(executable
 (public_name advent_of_code)
 (name main)
 (libraries dream y23)
 (preprocess (pps lwt_ppx)))
(rule
 (targets templates.ml)
 (deps templates.eml.html)
 (action (run dream_eml %{deps} --workspace %{workspace_root})))
(rule
  (target static.ml)
  (deps (source_tree ./static/))
  (action 
    (with-stdout-to 
      %{target}
      (run ocaml-crunch --mode=plain ./static/))))
(rule
 (alias run)
 (action
  (run advent_of_code)))
